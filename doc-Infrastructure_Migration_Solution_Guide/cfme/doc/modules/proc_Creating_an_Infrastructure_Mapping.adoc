[[Creating_an_Infrastructure_Mapping]]
= Creating an infrastructure mapping

Create an infrastructure mapping to map your source resources to your target environment. The infrastructure mapping is the basis for a migration plan and can be used by multiple migration plans.

[IMPORTANT]
====
You should ensure that your environments are in a stable state when you create a mapping.

If you add or remove providers or provider objects from an infrastructure mapping, the mapping will have missing resource errors. You must delete the infrastructure mapping and create a new one.
====

.Prerequisite

* Red Hat Virtualization only: xref:Enabling_conversion_hosts_in_cloudforms[Authenticate the RHV conversion hosts in CloudForms] to ensure that the network appears in the infrastructure mapping.

.Procedure

. Click menu:Compute[Migration > Infrastructure Mappings].
. Click *Create Infrastructure Mapping*.
. Perform the following procedures in the *Create Infrastructure Mapping* wizard:

image:Creating_infrastructure_mapping.png[]

[cols="1,3", options="header"]
|===
^|Screen ^|Procedure

|*General*
.<a|. Enter the *Name* and (optional) *Description*.
. Select a *Target Provider*.
. Click *Next*.

|*Map Compute*
.<a|. Select a *Source Provider \ Datacenter \ Cluster*.
. Select a target:
* Red Hat Virtualization: *Target Provider \ Datacenter \ Cluster*
* OpenStack Platform: *Target Provider \ Project*.
+
A target environment that does not contain a conversion host displays a warning icon (&#65279;image:warning.png[height=15px]&#65279;).
. Click *Add Mapping*. You can map additional clusters or projects.
. Click *Next*.

|*Map Storage*
.<a|. Select a source cluster whose datastores you want to map.
. Select a *Source Provider \ Datacenter \ Datastore*.
. Select a target storage:
* Red Hat Virtualization: *Target Datastores*
* OpenStack Platform: *Target Provider \ Volume Type*.
+
If the OpenStack Platform volume type does not appear, check that the volume type has been set. See xref:Infrastructure_mapping_errors[].
. Click *Add Mapping*. You can map additional datastores.
. Click *Next*.

|*Map Networks*
.<a|. Select a source cluster from the drop-down list.
. Select one or more networks from *Source Provider \ Datacenter \ Network*.
. Select a *Target Project \ Network*.
+
OpenStack Platform: IMS supports both provider and tenant networks.

. Click *Add Mapping*. You can map the networks of additional source clusters.
. Click *Create*.

|*Results*
.<a|Click *Close*. Your infrastructure mapping is saved in menu:Compute[Migration > Infrastructure Mappings].
|===

You can click an infrastructure mapping element to view its details:

.Infrastructure Mappings list
image:Infra_mappings_list.png[]

After you have created an infrastructure mapping, you can xref:Creating_and_running_a_migration_plan[create and run a migration plan].
