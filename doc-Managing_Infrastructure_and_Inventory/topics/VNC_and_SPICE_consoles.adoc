[[_vnc_and_spice_consoles]]
= Remote Consoles

A console is a graphical window that allows you to view the start up screen, shut down screen, and desktop of a virtual machine, and to interact with that virtual machine in a similar way to a physical machine. 

{product-title} offers the following support for HTML5-based VNC and SPICE consoles:

* VNC and SPICE consoles for Red Hat Virtualization Manager with websocket proxy
* VMware's new WebMKS HTML console type
* VNC consoles for OpenStack using OpenStack-supplied websocket proxy

[NOTE]
====
VMware no longer supports the MKS console type. As a result, the VMware MKS and the VMRC plugin option have been disabled in {product-title_short}. However, the VMRC native desktop application is supported; see <<Configuring the VMRC Desktop Application for a Virtual Machine Console>>.
====


[[configuring-console-access-to-vmware-esxi-hosts-at-a-network-layer]]
== Configuring Console Access to VMware ESXi Hosts At A Network Layer

When configuring access to the VNC or HTML5 console, make sure that at a network layer:

* All VNC ports (5900-6000) are opened from the machine on which you access the {product-title} Console to the {product-title}.
* All VNC ports (5900-6000) are opened from the {product-title} to each VMware ESXi host running virtual machines that you want to access.
* The firewall on VMware ESXi hosts is enabled and that the VMware ESXi host firewall ports are opened.
* The VNC service (`gdbserver`) is running and that the `gdbserver` service has an association with ports 5900-6000 usually defined with a `/etc/vmware/firewall/service.xml` firewall rules configuration.
+
The `gdbserver` ruleset must be enabled on each ESXi host running virtual machines that will be accessed through the HTML5 console or VNC console on the {product-title}. The ruleset can be configured on the host itself, or using the VMware vCenter web user interface.

The following procedures apply to VMware vCenter 5.0 and later.

[[using-ssh-to-configure-vmware-esxi-hosts-to-enable-console-access]]
=== Using SSH to Configure VMware ESXi Hosts to Enable Console Access

Configure the `gdbserver` ruleset on the host using SSH.

. Access the host:
+
----
# ssh host@example.com
----
. Set the `gdbserver` parameter:
+
----
# esxcli network firewall ruleset set --ruleset-id gdbserver --enabled true
----
. Confirm that the ruleset is active:
+
----
# esxcli network firewall ruleset list
----

[[using-the-vmware-vcenter-web-interface-to-configure-esxi-hosts-to-enable-console-access]]
=== Using the VMware vCenter Web Interface to Configure ESXi Hosts to Enable Console Access

Configure the `gdbserver` ruleset on the host using the VMware vCenter web user interface.

. Select the ESXi host in the VMware vCenter web interface.
. Click the *Manage* tab.
. Click the *Settings* sub tab.
. Click menu:System[Security Profile] from the list on the left.
. Click *Edit*.
. Select the `gdbserver` ruleset, and then click *OK*.

[[configuring-the-vmware-esxi-host-firewall-ports-for-console-access]]
=== Configuring the VMware ESXi Host Firewall Ports for Console Access

Follow these steps to configure the VMware ESXi host firewall ports for HTML5 or VNC console access to guest virtual machine consoles. The firewall ports must be enabled on each VMware ESXi host running virtual machines that will be accessed through the HTML5 or VNC console on the {product-title}.

. Log in to your vSphere Client and select menu:Home[Inventory > Hosts and Clusters].
. In the *Hosts/Clusters* tree view, select the VMware ESXi host you want to configure for HTML5 or VNC console access.
. Select the *Configuration* tab and open the *Software* box.
. Select *Security Profile*.
. Navigate to the *Firewall Properties* dialog window by selecting the *Properties* link from the *Firewall* section.
. In the *Firewall Properties*, scroll down to *GDB Server* and select it.
. Click *OK*.


[[configuring-the-webmks-support]]
== Configuring the WebMKS Support in {product-title_short}

[NOTE]
====
This section only applies to using the VMRC native desktop application for accessing a virtual machine console. It does not apply to access through the HTML5-based console.
====

Complete the following steps to enable the WebMKS support in {product-title_short}.

. Log in to the {product-title_short} appliance console as a root user.
. Extract the link:https://www.vmware.com/support/developer/html-console/[VMware WebMKS SDK] into the `public/webmks` folder in the appliance's root directory. Note that the `public` folder already exists, therefore create the `webmks` folder manually.


[[opening-a-console-for-a-virtual-machine]]
== Opening a Console for a Virtual Machine

Open a web-based VNC or SPICE console for a virtual machine.

. Navigate to menu:Compute[Infrastructure > Virtual Machines].
. Click on the virtual machine that you want to access.
. Click image:screen.png[] (*Access*) and select *VM Console* or *Web Console*.

The virtual machine console opens in a new tab in your browser.


